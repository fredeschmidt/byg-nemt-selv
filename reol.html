<!doctype html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Væg til væg reol | Byg Nemt Selv</title>
    <link rel="stylesheet" href="styles/global.css" />
  </head>
  <body>
    <header id="header">
      <a href="index.html" aria-label="Tilbage til forsiden">
        <img class="header-logo" src="images/logo.png" alt="Byg Nemt Selv logo" />
      </a>
      <div class="header-inner">
        <h1 class="header-title">Væg til væg reol</h1>
      </div>
    </header>

    <main>
      <section class="solution-picker">
        <form id="solution-form" action="guide-reol.html" method="get" novalidate>
          <fieldset class="solution-picker__fieldset">
            <legend id="solution-picker-title" class="solution-picker__legend"><span class="header-subtitle__number">01</span> Vælg reol</legend>
            <ul class="solution-picker__list">
              <li class="solution-picker__item">
                <input class="solution-picker__radio" type="radio" name="solution_choice" id="solution-choice-1" value="a" checked />
                <label class="solution-picker__card" for="solution-choice-1">
                  <figure class="solution-picker__image-wrap">
                    <img class="solution-picker__image" src="images/reol-doodle.png" alt="Skitse af klassisk væg-til-væg reol" />
                  </figure>
                  <p class="solution-picker__title">Klassisk modulreol</p>
                </label>
                <p class="solution-picker__meta">Mest opbevaring for pengene. God til kasser, bøger og hverdagsting.</p>
              </li>

              <li class="solution-picker__item">
                <input class="solution-picker__radio" type="radio" name="solution_choice" id="solution-choice-2" value="b" />
                <label class="solution-picker__card" for="solution-choice-2">
                  <figure class="solution-picker__image-wrap">
                    <img class="solution-picker__image" src="images/reol-door-doodle.png" alt="Skitse af reol med skabsmoduler nederst" />
                  </figure>
                  <p class="solution-picker__title">Reol + lukkede moduler</p>
                </label>
                <p class="solution-picker__meta">Roligt look. Lukkede felter nederst skjuler rod og gør oprydning hurtig.</p>
              </li>

              <li class="solution-picker__item">
                <input class="solution-picker__radio" type="radio" name="solution_choice" id="solution-choice-3" value="c" />
                <label class="solution-picker__card" for="solution-choice-3">
                  <figure class="solution-picker__image-wrap">
                    <img class="solution-picker__image" src="images/reol-asymetrisk-doodle.png" alt="Skitse af asymmetrisk designreol" />
                  </figure>
                  <p class="solution-picker__title">Asymmetrisk designreol</p>
                </label>
                <p class="solution-picker__meta">Mere karakter og visuel rytme. God hvis reolen også skal være et statement.</p>
              </li>
            </ul>
          </fieldset>

          <fieldset class="solution-picker__fieldset solution-picker__fieldset--measure">
            <legend id="solution-picker-measure-title" class="solution-picker__legend">
              <span class="header-subtitle__number">02</span> Indtast mål og ønsker
            </legend>

            <section class="solution-picker__subsection">
              <ul class="solution-picker__measure-list">
                <li class="solution-picker__measure-item">
                  <label class="solution-picker__field-label" for="customer-name">Navn</label>
                  <input class="solution-picker__input" id="customer-name" name="customer_name" type="text" placeholder="Indtast dit navn" />
                </li>
              </ul>
            </section>

            <section class="solution-picker__subsection">
              <h3 id="placement-title" class="solution-picker__question">Hvor skal reolen stå?</h3>
              <ul class="solution-picker__choice-list">
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="placement_choice" value="between-walls" />
                    <span>Mellem to vægge (væg-til-væg)</span>
                  </label>
                </li>
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="placement_choice" value="one-wall" />
                    <span>Mod én væg (fritstående langs væg)</span>
                  </label>
                </li>
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="placement_choice" value="alcove" />
                    <span>I en niche/alkove</span>
                  </label>
                </li>
              </ul>
            </section>

            <section class="solution-picker__subsection">
              <ul class="solution-picker__measure-list">
                <li class="solution-picker__measure-item">
                  <label class="solution-picker__field-label" for="wall-width">Bredde</label>
                  <input
                    class="solution-picker__input"
                    id="wall-width"
                    name="wall_width_cm"
                    type="number"
                    inputmode="numeric"
                    min="1"
                    placeholder="Indtast bredde i cm"
                    aria-describedby="tip-wall-width"
                  />
                  <p id="tip-wall-width" class="solution-picker__tip">Tip: hvis den står mellem to vægge, trækker vi automatisk 0,5-1 cm fra, så den passer.</p>
                </li>

                <li class="solution-picker__measure-item">
                  <label class="solution-picker__field-label" for="wall-height">Højde</label>
                  <input
                    class="solution-picker__input"
                    id="wall-height"
                    name="wall_height_cm"
                    type="number"
                    inputmode="numeric"
                    min="1"
                    placeholder="Indtast højde i cm"
                    aria-describedby="tip-wall-height"
                  />
                  <p id="tip-wall-height" class="solution-picker__tip">Tip: fuld højde eller fx 200 cm?</p>
                </li>

                <li class="solution-picker__measure-item">
                  <label class="solution-picker__field-label" for="shelf-depth">Dybde</label>
                  <input
                    class="solution-picker__input"
                    id="shelf-depth"
                    name="shelf_depth_cm"
                    type="number"
                    inputmode="numeric"
                    min="1"
                    placeholder="Indtast dybde i cm"
                    aria-describedby="tip-shelf-depth"
                  />
                  <p id="tip-shelf-depth" class="solution-picker__tip">Tip: 25-30 cm til bøger, 35-40 cm til kasser.</p>
                </li>

                <li class="solution-picker__measure-item">
                  <label class="solution-picker__field-label" for="baseboard-depth">Sokkel-/fodliste dybde</label>
                  <input class="solution-picker__input" id="baseboard-depth" name="baseboard_depth_cm" type="number" inputmode="numeric" min="0" placeholder="Indtast dybde i cm" />
                </li>
              </ul>
            </section>

            <section class="solution-picker__subsection">
              <div class="solution-picker__option-group">
                <h4 class="solution-picker__group-title">Skal reolen gå helt til loft?</h4>
                <p id="tip-to-ceiling" class="solution-picker__tip">(Kun guides til fladt loft)</p>
                <ul class="solution-picker__choice-list">
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="to_ceiling" value="yes" />
                      <span>Ja</span>
                    </label>
                  </li>
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="to_ceiling" value="no" />
                      <span>Nej</span>
                    </label>
                  </li>
                </ul>
              </div>

            </section>

            <section class="solution-picker__subsection">
              <h4 id="wall-type-title" class="solution-picker__group-title">Hvilken væg skal den fastgøres til?</h4>
              <ul class="solution-picker__choice-list">
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="wall_type" value="gypsum" />
                    <span>Gips</span>
                  </label>
                </li>
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="wall_type" value="brick" />
                    <span>Mursten</span>
                  </label>
                </li>
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="wall_type" value="concrete" />
                    <span>Beton</span>
                  </label>
                </li>
                <li>
                  <label class="solution-picker__choice">
                    <input type="radio" name="wall_type" value="unknown" />
                    <span>Ved ikke</span>
                  </label>
                </li>
              </ul>
            </section>

            <section class="solution-picker__subsection">
              <div class="solution-picker__option-group">
                <h4 id="finish-budget-title" class="solution-picker__group-title">Look og budget</h4>
                <ul class="solution-picker__choice-list">
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_budget" value="budget" />
                      <span>Budget (byggemarked, nemt)</span>
                    </label>
                  </li>
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_budget" value="standard" />
                      <span>Standard (pænt + solidt)</span>
                    </label>
                  </li>
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_budget" value="premium" />
                      <span>Premium (lækker finish)</span>
                    </label>
                  </li>
                </ul>
              </div>

              <div class="solution-picker__option-group">
                <h4 id="finish-surface-title" class="solution-picker__group-title">Overflade</h4>
                <ul class="solution-picker__choice-list">
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_surface" value="natural-wood" />
                      <span>Natur træ</span>
                    </label>
                  </li>
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_surface" value="painted" />
                      <span>Malet</span>
                    </label>
                  </li>
                  <li>
                    <label class="solution-picker__choice">
                      <input type="radio" name="finish_surface" value="decide-later" />
                      <span>Jeg beslutter senere</span>
                    </label>
                  </li>
                </ul>
              </div>
            </section>

            <div class="solution-picker__actions">
              <p id="solution-validation-error" class="solution-picker__validation-error" role="alert" hidden>du skal udfykde det hele før du kan komme videre</p>
              <button id="solution-next-button" class="solution-picker__next" type="submit">Næste</button>
            </div>
          </fieldset>
        </form>
      </section>
    </main>
    <script>
      (() => {
        const form = document.getElementById("solution-form");
        if (!form) return;
        const validationError = document.getElementById("solution-validation-error");
        let hasAttemptedSubmit = false;

        const hasChecked = (name) => Boolean(form.querySelector(`input[name="${name}"]:checked`));

        const hasPositiveInput = (id) => {
          const field = document.getElementById(id);
          if (!field) return false;
          const value = Number(field.value);
          return Number.isFinite(value) && value > 0;
        };

        const hasNonNegativeInput = (id) => {
          const field = document.getElementById(id);
          if (!field || !field.value.trim()) return false;
          const value = Number(field.value);
          return Number.isFinite(value) && value >= 0;
        };

        const hasTextInput = (id) => {
          const field = document.getElementById(id);
          return Boolean(field && field.value.trim());
        };

        const isComplete = () => {
          return (
            hasChecked("solution_choice") &&
            hasTextInput("customer-name") &&
            hasChecked("placement_choice") &&
            hasPositiveInput("wall-width") &&
            hasPositiveInput("wall-height") &&
            hasPositiveInput("shelf-depth") &&
            hasNonNegativeInput("baseboard-depth") &&
            hasChecked("wall_type") &&
            hasChecked("to_ceiling") &&
            hasChecked("finish_budget") &&
            hasChecked("finish_surface")
          );
        };

        const clearInvalidMarkers = () => {
          form.querySelectorAll(".is-invalid").forEach((node) => node.classList.remove("is-invalid"));
        };

        const markInvalidFields = () => {
          clearInvalidMarkers();
          const missingNodes = [];

          const requiredTextIds = ["customer-name"];
          const requiredNumberIds = ["wall-width", "wall-height", "shelf-depth"];
          const requiredNonNegativeIds = ["baseboard-depth"];
          const requiredRadioNames = ["placement_choice", "wall_type", "to_ceiling", "finish_budget", "finish_surface"];

          requiredTextIds.forEach((id) => {
            if (!hasTextInput(id)) {
              const field = document.getElementById(id);
              if (field) {
                field.classList.add("is-invalid");
                missingNodes.push(field);
              }
            }
          });

          requiredNumberIds.forEach((id) => {
            if (!hasPositiveInput(id)) {
              const field = document.getElementById(id);
              if (field) {
                field.classList.add("is-invalid");
                missingNodes.push(field);
              }
            }
          });

          requiredNonNegativeIds.forEach((id) => {
            if (!hasNonNegativeInput(id)) {
              const field = document.getElementById(id);
              if (field) {
                field.classList.add("is-invalid");
                missingNodes.push(field);
              }
            }
          });

          requiredRadioNames.forEach((name) => {
            if (!hasChecked(name)) {
              const firstRadio = form.querySelector(`input[name="${name}"]`);
              const group = firstRadio ? firstRadio.closest(".solution-picker__choice-list") : null;
              if (group) {
                group.classList.add("is-invalid");
                missingNodes.push(firstRadio);
              }
            }
          });

          return missingNodes;
        };

        const hideError = () => {
          if (!validationError) return;
          validationError.hidden = true;
        };

        const updateValidationState = () => {
          if (!hasAttemptedSubmit) return;
          const missing = markInvalidFields();
          if (missing.length === 0) {
            hideError();
          } else if (validationError) {
            validationError.hidden = false;
          }
        };

        form.addEventListener("input", updateValidationState);
        form.addEventListener("change", updateValidationState);
        form.addEventListener("submit", (event) => {
          if (!isComplete()) {
            event.preventDefault();
            hasAttemptedSubmit = true;
            const missing = markInvalidFields();
            if (validationError) {
              validationError.hidden = false;
            }
            if (missing[0]) {
              missing[0].focus();
            }
          }
        });
      })();
    </script>
  </body>
</html>
